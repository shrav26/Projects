<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="ss.css"> 
  <link rel="stylesheet" href="/static/ss.css">
  <style>
    body {
      background-image: url('https://st4.depositphotos.com/23984968/25107/i/450/depositphotos_251074692-stock-photo-abstract-blue-medical-background-doctor.jpg');
      background-size: cover; /* Adjust the background size as needed */
      background-repeat: no-repeat;
      margin: 0; /* Remove default margin */
      padding: 0; /* Remove default padding */
    }
  </style>
</head>
<body>
  <section class="forms-section">
    <h1 class="section-title">Login & Signup </h1>
    <div class="forms">
      <div class="form-wrapper is-active">
        <button type="button" class="switcher switcher-login">
          Login
          <span class="underline"></span>
        </button>
        <form class="form form-login" action="/login1" method="post" onsubmit="return validateLogin1()">
          <fieldset>
            <legend>Please, enter your email and password for login.</legend>
            <div class="input-block">
              <label for="login-email">E-mail</label>
              <input id="login-email" name="email" type="email" required>
            </div>
            <div class="input-block">
              <label for="login-password">Password</label>
              <input id="login-password" name="password" type="password" required>
            </div>
          </fieldset>
          <button type="submit" class="btn-login" id="loginBtn">Login</button>
        </form> 
      </div>
      <div class="form-wrapper">
        <button type="button" class="switcher switcher-signup">
          Sign Up
          <span class="underline"></span>
        </button>
        <form class="form form-signup" action="/signup1" method="post" onsubmit="return validateSignup1()">
          <fieldset>
            <legend>Please, enter your email, password and password confirmation for sign up.</legend>
            <div class="input-block">
              <label for="signup-username">Username</label>
              <input id="signup-username" name="username" type="text" required>
            </div>
            <div class="input-block">
              <label for="signup-email">E-mail</label>
              <input id="signup-email" name="email" type="email" required>
            </div>
            <div class="input-block">
              <label for="signup-password">Password</label>
              <input id="signup-password" name="password" type="password" required>
            </div>
          </fieldset>
          <button type="submit" class="btn-signup">Sign Up</button>
        </form>
      </div>
    </div>
  </section>
  <script>
    const switchers = [...document.querySelectorAll('.switcher')];

    switchers.forEach(item => {
      item.addEventListener('click', function() {
        switchers.forEach(item => item.parentElement.classList.remove('is-active'))
        this.parentElement.classList.add('is-active')
      })
    });

    function validateLogin1() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;

      if (!email || !password) {
        alert('Please fill in all fields for login.');
        return false;
      }

      // Send a POST request to the server for login
      fetch('/login1', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },  
        body: JSON.stringify({ email: email, password: password }),
      })
      .then(response => response.json())
      .then(data => {
        // Check the response from the server
        if (data.success) {
          // If login is successful, redirect the user to the home page or perform any other action
          window.location.href = '/static/phome.html'; // Change '/home' to the appropriate URL
        } else {
          // If login fails, display an error message to the user
          alert(data.message);
        }
      })
      .catch(error => console.error('Error:', error));

      return false; // Prevent form submission
    }

    function validateSignup1() {
      const username = document.getElementById('signup-username').value;
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;

      if (!username || !email || !password) {
        alert('Please fill in all fields for signup.');
        return false;
      }

      // Send a POST request to the server for signup
      fetch('/signup1', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ username: username, email: email, password: password }),
      })
      .then(response => response.json())
      .then(data => {
        // Handle the response from the server
        alert(data.message); // You can handle the response as needed
      })
      .catch(error => console.error('Error:', error));

      return false; // Prevent form submission
    }
  </script>
</body>
</html>
